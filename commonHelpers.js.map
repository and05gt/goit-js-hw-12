{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '45098257-09112d803d024f473cdacef7f';\n\nexport async function searchImages(search, page = 1) {\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: search,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    return iziToast.error({\n      title: 'Error',\n      titleColor: '#fff',\n      message: `${error}`,\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      messageColor: '#fff',\n      theme: 'dark',\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nexport function renderImage(data) {\n  const imagesMarkup = data.hits\n    .map(\n      hit =>\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\"/>\n        </a>\n        <div class=\"gallery-wrapper\">\n        <div class=\"text-wrap\"><h3>Likes</h3><p>${hit.likes}</p></div>\n        <div class=\"text-wrap\"><h3>Views</h3><p>${hit.views}</p></div>\n        <div class=\"text-wrap\"><h3>Comments</h3><p>${hit.comments}</p></div>\n        <div class=\"text-wrap\"><h3>Downloads</h3><p>${hit.downloads}</p></div>\n        </div>\n        </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imagesMarkup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  lightbox.refresh();\n}\n\nexport function handleImageClear() {\n  gallery.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImages } from './js/pixabay-api.js';\nimport { renderImage, handleImageClear } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn');\n\nlet page = 1;\nlet searchValue = '';\n\nform.addEventListener('submit', handleSearch);\nloadBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  handleImageClear();\n\n  loader.classList.add('loader-active');\n\n  searchValue = form.elements.search.value.trim();\n\n  page = 1;\n\n  await fetchImages();\n\n  form.reset();\n}\n\nasync function fetchImages() {\n  try {\n    const data = await searchImages(searchValue, page);\n\n    loader.classList.remove('loader-active');\n    renderImage(data);\n    smoothScroll();\n\n    if (data.total === 0 || searchValue === '') {\n      loadBtn.classList.add('hidden');\n      return iziToast.error({\n        title: 'Error',\n        titleColor: '#fff',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#fff',\n        theme: 'dark',\n      });\n    } else if (data.hits.length === 0 || page * 15 >= data.totalHits) {\n      loadBtn.classList.add('hidden');\n      return iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    return iziToast.error({\n      title: 'Error',\n      titleColor: '#fff',\n      message: `${error}`,\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      messageColor: '#fff',\n      theme: 'dark',\n    });\n  }\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  loadBtn.classList.add('hidden');\n  loader.classList.add('loader-active');\n  await fetchImages();\n}\n\nfunction smoothScroll() {\n  const gallery = document.querySelector('.gallery');\n  const height = gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["URL","API_KEY","searchImages","search","page","axios","error","iziToast","gallery","renderImage","data","imagesMarkup","hit","SimpleLightbox","handleImageClear","form","loader","loadBtn","searchValue","handleSearch","handleLoadMore","event","fetchImages","smoothScroll","height"],"mappings":"owBAKA,MAAMA,EAAM,2BACNC,EAAU,qCAET,eAAeC,EAAaC,EAAQC,EAAO,EAAG,CACnD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAK,CACpC,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,OAAOC,EAAS,MAAM,CACpB,MAAO,QACP,WAAY,OACZ,QAAS,GAAGD,CAAK,GACjB,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,MAAO,MACb,CAAK,CACF,CACH,CC9BA,MAAME,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAYC,EAAM,CAChC,MAAMC,EAAeD,EAAK,KACvB,IACCE,GACE;AAAA,wCACgCA,EAAI,aAAa;AAAA,0CACfA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,kDAG1BA,EAAI,KAAK;AAAA,kDACTA,EAAI,KAAK;AAAA,qDACNA,EAAI,QAAQ;AAAA,sDACXA,EAAI,SAAS;AAAA;AAAA,cAG9D,EACA,KAAK,EAAE,EAEVJ,EAAQ,mBAAmB,YAAaG,CAAY,EAEnC,IAAIE,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EAEQ,QAAO,CAClB,CAEO,SAASC,GAAmB,CACjCN,EAAQ,UAAY,EACtB,CC7BA,MAAMO,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIb,EAAO,EACPc,EAAc,GAElBH,EAAK,iBAAiB,SAAUI,CAAY,EAC5CF,EAAQ,iBAAiB,QAASG,CAAc,EAEhD,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EAEpBP,IAEAE,EAAO,UAAU,IAAI,eAAe,EAEpCE,EAAcH,EAAK,SAAS,OAAO,MAAM,KAAI,EAE7CX,EAAO,EAEP,MAAMkB,EAAW,EAEjBP,EAAK,MAAK,CACZ,CAEA,eAAeO,GAAc,CAC3B,GAAI,CACF,MAAMZ,EAAO,MAAMR,EAAagB,EAAad,CAAI,EAMjD,GAJAY,EAAO,UAAU,OAAO,eAAe,EACvCP,EAAYC,CAAI,EAChBa,IAEIb,EAAK,QAAU,GAAKQ,IAAgB,GACtC,OAAAD,EAAQ,UAAU,IAAI,QAAQ,EACvBV,EAAS,MAAM,CACpB,MAAO,QACP,WAAY,OACZ,QACE,2EACF,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,MAAO,MACf,CAAO,EACI,GAAIG,EAAK,KAAK,SAAW,GAAKN,EAAO,IAAMM,EAAK,UACrD,OAAAO,EAAQ,UAAU,IAAI,QAAQ,EACvBV,EAAS,KAAK,CACnB,SAAU,WACV,QAAS,4DACjB,CAAO,EAEDU,EAAQ,UAAU,OAAO,QAAQ,CAEpC,OAAQX,EAAO,CACd,OAAOC,EAAS,MAAM,CACpB,MAAO,QACP,WAAY,OACZ,QAAS,GAAGD,CAAK,GACjB,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,MAAO,MACb,CAAK,CACF,CACH,CAEA,eAAec,GAAiB,CAC9BhB,GAAQ,EACRa,EAAQ,UAAU,IAAI,QAAQ,EAC9BD,EAAO,UAAU,IAAI,eAAe,EACpC,MAAMM,EAAW,CACnB,CAEA,SAASC,GAAe,CAEtB,MAAMC,EADU,SAAS,cAAc,UAAU,EAC1B,kBAAkB,sBAAqB,EAAG,OACjE,OAAO,SAAS,CACd,IAAKA,EAAS,EACd,SAAU,QACd,CAAG,CACH"}